cmake_minimum_required (VERSION 2.8)
project (Boost_datetime)
enable_language (CXX)

set (LIBRARY_NAME "datetime")

file (GLOB SOURCES_greg "${CMAKE_CURRENT_SOURCE_DIR}/src/gregorian/*.cpp")
file (GLOB SOURCES_posix "${CMAKE_CURRENT_SOURCE_DIR}/src/posix_time/*.cpp")
set (SOURCES ${SOURCES_greg} ${SOURCES_posix})

include_directories ("include")

# add Boost minimal_boost
string (REPLACE ${LIBRARY_NAME} "minimal_boost" LIBRARY_MINIMALBOOST ${CMAKE_CURRENT_SOURCE_DIR})
if (EXISTS "${LIBRARY_MINIMALBOOST}/boost")
    include_directories (SYSTEM "${LIBRARY_MINIMALBOOST}")
else ()
    message (FATAL_ERROR "ERROR: Cannot find Boost minimal_boost library!")
endif ()

#add_library(${LIBRARY_NAME} STATIC ${SOURCES})
add_library(${LIBRARY_NAME} SHARED ${SOURCES})

# Set default make output folder
set_target_properties(${LIBRARY_NAME} PROPERTIES
    ARCHIVE_OUTPUT_DIRECTORY "${COMMON_OUTPUT_DIR}/lib"  # if static 
    LIBRARY_OUTPUT_DIRECTORY "${COMMON_OUTPUT_DIR}/lib") # if shared

# Copy library and headers to destination
install(TARGETS ${LIBRARY_NAME} LIBRARY DESTINATION "${DEPENDENCY_PATH}/install/lib")
install(DIRECTORY "include" DESTINATION "${DEPENDENCY_PATH}/install")
