<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AnalogEnsemble: /home/graduate/wuh20/github/AnalogsEnsemble/apps/app_gribConverter/gribConverter.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AnalogEnsemble
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_de7a6ac88ac216ca1102540557b7e286.html">graduate</a></li><li class="navelem"><a class="el" href="dir_c115b2a6f4a58aca62bd8551288e2c68.html">wuh20</a></li><li class="navelem"><a class="el" href="dir_9c3587517ccce060547d9d8ae06ba5ef.html">github</a></li><li class="navelem"><a class="el" href="dir_7a4a62549309bb857d45cac63e893526.html">AnalogsEnsemble</a></li><li class="navelem"><a class="el" href="dir_de33c52dd952b7857badb69c0c740195.html">apps</a></li><li class="navelem"><a class="el" href="dir_230fe553546d125b6edb9f2a5e8d06ed.html">app_gribConverter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gribConverter.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;eccodes.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_an_en_8h_source.html">AnEn.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_an_en_i_o_8h_source.html">AnEnIO.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="color_texts_8h_source.html">colorTexts.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_common_exe_functions_8h_source.html">CommonExeFunctions.h</a>&quot;</code><br />
<code>#include &quot;boost/filesystem.hpp&quot;</code><br />
<code>#include &quot;boost/date_time/gregorian/gregorian.hpp&quot;</code><br />
<code>#include &quot;boost/program_options/options_description.hpp&quot;</code><br />
<code>#include &quot;boost/program_options/parsers.hpp&quot;</code><br />
<code>#include &quot;boost/program_options/variables_map.hpp&quot;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;regex&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;exception&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a66934236ba678c0fb37e49a9087e6331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a66934236ba678c0fb37e49a9087e6331">getXY</a> (vector&lt; double &gt; &amp;xs, vector&lt; double &gt; &amp;ys, string file, long par_id, long level, string par_key=&quot;paramId&quot;, string level_key=&quot;level&quot;, string val_key=&quot;values&quot;)</td></tr>
<tr class="separator:a66934236ba678c0fb37e49a9087e6331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5213328814e6eaaccbdf0316e2eef977"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a5213328814e6eaaccbdf0316e2eef977">MY_CODES_CHECK</a> (int ret, int caller)</td></tr>
<tr class="separator:a5213328814e6eaaccbdf0316e2eef977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480ad9e32756837553526b1f47d436c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a480ad9e32756837553526b1f47d436c8">getDoubles</a> (vector&lt; double &gt; &amp;vals, string file, long par_id, long level, string type, string par_key=&quot;paramId&quot;, string level_key=&quot;level&quot;, string type_key=&quot;typeOfLevel&quot;, string val_key=&quot;values&quot;)</td></tr>
<tr class="separator:a480ad9e32756837553526b1f47d436c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcb7ad0cdc15da64e59e675785e652c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a5bcb7ad0cdc15da64e59e675785e652c">toForecasts</a> (const vector&lt; string &gt; &amp;files_in, const string &amp;file_out, const vector&lt; long &gt; &amp;pars_id, const vector&lt; string &gt; &amp;pars_new_name, const vector&lt; long &gt; &amp;crcl_pars_id, const vector&lt; long &gt; &amp;levels, const vector&lt; string &gt; &amp;level_types, const string &amp;par_key, const string &amp;level_key, const string &amp;type_key, const string &amp;val_key, string regex_time_str, string regex_flt_str, double flt_interval, bool delimited=false, int verbose=0)</td></tr>
<tr class="separator:a5bcb7ad0cdc15da64e59e675785e652c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e8bf83b8b165538d1db64b7a390945"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a07e8bf83b8b165538d1db64b7a390945">toObservations</a> (const vector&lt; string &gt; &amp;files_in, const string &amp;file_out, const vector&lt; long &gt; &amp;pars_id, const vector&lt; string &gt; &amp;pars_new_name, const vector&lt; long &gt; &amp;crcl_pars_id, const vector&lt; long &gt; &amp;levels, const vector&lt; string &gt; &amp;level_types, const string &amp;par_key, const string &amp;level_key, const string &amp;type_key, const string &amp;val_key, string regex_time_str, bool delimited=false, int verbose=0)</td></tr>
<tr class="separator:a07e8bf83b8b165538d1db64b7a390945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="grib_converter_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a480ad9e32756837553526b1f47d436c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a480ad9e32756837553526b1f47d436c8">&#9670;&nbsp;</a></span>getDoubles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getDoubles </td>
          <td>(</td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>vals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>par_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>par_key</em> = <code>&quot;paramId&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>level_key</em> = <code>&quot;level&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>type_key</em> = <code>&quot;typeOfLevel&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>val_key</em> = <code>&quot;values&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>getDoubles gets an array of values based on the paramId and the level. The values are in row-major as the convention of C++.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vals</td><td>A vector to store the data array. </td></tr>
    <tr><td class="paramname">file</td><td>The file to read data from. </td></tr>
    <tr><td class="paramname">par_id</td><td>The ID of the parameter. This can be found using the grib_ls utility or by looking up in the ecCodes parameter database, <a href="http://apps.ecmwf.int/codes/grib/param-db/">http://apps.ecmwf.int/codes/grib/param-db/</a>}. </td></tr>
    <tr><td class="paramname">level</td><td>The level of the parameter. </td></tr>
    <tr><td class="paramname">type</td><td>The type for level (typeOfLevel) </td></tr>
    <tr><td class="paramname">par_key</td><td>The key name of the parameter. </td></tr>
    <tr><td class="paramname">level_key</td><td>The key name of the level. </td></tr>
    <tr><td class="paramname">type_key</td><td>The key name of the typeOfLevel. </td></tr>
    <tr><td class="paramname">val_key</td><td>The key name of the value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a66934236ba678c0fb37e49a9087e6331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66934236ba678c0fb37e49a9087e6331">&#9670;&nbsp;</a></span>getXY()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getXY </td>
          <td>(</td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>xs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>ys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>par_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>par_key</em> = <code>&quot;paramId&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>level_key</em> = <code>&quot;level&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>val_key</em> = <code>&quot;values&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>getXY gets the xs and ys of a parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xs</td><td>A vector to store the x values. </td></tr>
    <tr><td class="paramname">ys</td><td>A vector to store the y values. </td></tr>
    <tr><td class="paramname">file</td><td>The file to read data from. </td></tr>
    <tr><td class="paramname">par_id</td><td>The ID of the parameter. This can be found using the grib_ls utility or by looking up in the ecCodes parameter database, <a href="http://apps.ecmwf.int/codes/grib/param-db/">http://apps.ecmwf.int/codes/grib/param-db/</a>}. </td></tr>
    <tr><td class="paramname">level</td><td>The level of the parameter. </td></tr>
    <tr><td class="paramname">par_key</td><td>The key name of the parameter. </td></tr>
    <tr><td class="paramname">level_key</td><td>The key name of the level. </td></tr>
    <tr><td class="paramname">val_key</td><td>The key name of the value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5213328814e6eaaccbdf0316e2eef977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5213328814e6eaaccbdf0316e2eef977">&#9670;&nbsp;</a></span>MY_CODES_CHECK()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MY_CODES_CHECK </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5bcb7ad0cdc15da64e59e675785e652c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcb7ad0cdc15da64e59e675785e652c">&#9670;&nbsp;</a></span>toForecasts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toForecasts </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>files_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>file_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>pars_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>pars_new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>crcl_pars_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>levels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>level_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>par_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>level_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>type_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>val_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>regex_time_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>regex_flt_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>flt_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delimited</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>toForecasts function reads data multiple forecast files and write them in <a class="el" href="class_forecasts.html" title="Forecasts class provides interface for reading and writing forecast data from and to a NetCDF file...">Forecasts</a> NetCDf file that is ready to be used to compute Analog Ensembles.</p>
<p>Parameter and Station information are determined from the data in file. Parameter is determined by the combination of the parameter ID and the level number. Station is determined by the x (or lon) and y (or lat) variable.</p>
<p>FLT and Time information are determined from the file names using regular expressions. The first variable matched in the regular expression will be used. For example, we have a regular expression like this '.*nam_218_{8}_{4}_({3}).grb2$'</p>
<p>This expression has one extract variable '({3})', and therefore the string matched here will be used to calculate the FLT or Time information. The Time information will be determined by calculating the duration in second from the original date.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">files_in</td><td>A vector of file names that are found in the folder. The folder is provided in the program option. </td></tr>
    <tr><td class="paramname">file_out</td><td>The output file path. </td></tr>
    <tr><td class="paramname">pars_id</td><td>A vector of parameters ID that will be read from each file. </td></tr>
    <tr><td class="paramname">pars_new_name</td><td>A vector of names that will assign to the parameters in the new <a class="el" href="class_forecasts.html" title="Forecasts class provides interface for reading and writing forecast data from and to a NetCDF file...">Forecasts</a> NetCDF file. </td></tr>
    <tr><td class="paramname">crcl_pars_id</td><td>A vector of parameters ID for circular parameters. </td></tr>
    <tr><td class="paramname">levels</td><td>A vector of level numbers to specify for each parameter. </td></tr>
    <tr><td class="paramname">level_types</td><td>A vector of types of levels. </td></tr>
    <tr><td class="paramname">par_key</td><td>The key name of parameter ID. </td></tr>
    <tr><td class="paramname">level_key</td><td>The key name of level. </td></tr>
    <tr><td class="paramname">type_key</td><td>The key name of type of level. </td></tr>
    <tr><td class="paramname">val_key</td><td>The key name of values. </td></tr>
    <tr><td class="paramname">regex_time_str</td><td>The regular expression used to extract time information. </td></tr>
    <tr><td class="paramname">regex_flt_str</td><td>The regular expression used to extract FLT information. </td></tr>
    <tr><td class="paramname">flt_interval</td><td>The FLT interval in seconds. This interval will be used to multiply the FLT information extracted from the file name to determine the actual offset in seconds for each FLT timestamp from the origin. </td></tr>
    <tr><td class="paramname">delimited</td><td>Whether the extract Time information is delimited. A string like '19900701' will be undelimited; a string like '1990-07-01' or '1990/07/01' is delimited. </td></tr>
    <tr><td class="paramname">verbose</td><td>An integer for the verbose level. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07e8bf83b8b165538d1db64b7a390945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07e8bf83b8b165538d1db64b7a390945">&#9670;&nbsp;</a></span>toObservations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toObservations </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>files_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>file_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>pars_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>pars_new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>crcl_pars_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; long &gt; &amp;&#160;</td>
          <td class="paramname"><em>levels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&#160;</td>
          <td class="paramname"><em>level_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>par_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>level_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>type_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>val_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>regex_time_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delimited</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>toObservations function reads data from multiple observation files and write them in <a class="el" href="class_observations.html" title="Observations class provides interface for reading and writing observations from and to a NetCDF file...">Observations</a> NetCDF fiel that is ready to be used to compute Analog Ensembles.</p>
<p>Parameter and Station information are determined from the data in file. Parameter is determined by the combination of the parameter ID and the level number. Station is determined by the x (or lon) and y (or lat) variable.</p>
<p>Time information are determined from the file names using regular expressions. The first variable matched in the regular expression will be used. For example, we have a regular expression like this '.*nam_218_{8}_({4})_{3}.grb2$'</p>
<p>This expression has one extract variable '({4})', and therefore the string matched here will be used to calculate the Time information. The Time information will be determined by calculating the duration in second from the original date.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">files_in</td><td>A vector of file names that are found in the folder. The folder is provided in the program option. </td></tr>
    <tr><td class="paramname">file_out</td><td>The output file path. </td></tr>
    <tr><td class="paramname">pars_id</td><td>A vector of parameters ID that will be read from each file. </td></tr>
    <tr><td class="paramname">pars_new_name</td><td>A vector of names that will assign to the parameters in the new <a class="el" href="class_forecasts.html" title="Forecasts class provides interface for reading and writing forecast data from and to a NetCDF file...">Forecasts</a> NetCDF file. </td></tr>
    <tr><td class="paramname">crcl_pars_id</td><td>A vector of parameters ID for circular parameters. </td></tr>
    <tr><td class="paramname">levels</td><td>A vector of level numbers to specify for each parameter. </td></tr>
    <tr><td class="paramname">level_types</td><td>A vector of types of levels. </td></tr>
    <tr><td class="paramname">par_key</td><td>The key name of parameter ID. </td></tr>
    <tr><td class="paramname">level_key</td><td>The key name of level. </td></tr>
    <tr><td class="paramname">type_key</td><td>The key name of type of level. </td></tr>
    <tr><td class="paramname">val_key</td><td>The key name of values. </td></tr>
    <tr><td class="paramname">regex_time_str</td><td>The regular expression used to extract time information. </td></tr>
    <tr><td class="paramname">delimited</td><td>Whether the extract Time information is delimited. A string like '19900701' will be undelimited; a string like '1990-07-01' or '1990/07/01' is delimited. </td></tr>
    <tr><td class="paramname">verbose</td><td>An integer for the verbose level. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
