<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parallel Analog Ensemble: 2019-01-16-NetCDF-File-Types</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Parallel Analog Ensemble
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">2019-01-16-NetCDF-File-Types </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2></h2>
<p >layout: post title: NetCDF File Types and Variables for Analog Ensemble Applications tags: </p><h2>- document </h2>
<hr  />
<p ><em>Updates on 2021/12/16</em></p>
<ol type="1">
<li>I used <code>R</code> to generate the file format messages below. If you are using <code>ncdump</code> or <code>python</code>, you should reverse the dimension orders. For example, <code>Data</code> would be <code>[num_flts, num_times, num_stations, num_parameters]</code>.</li>
<li>For character-related variables, like <code>ParameterNames</code> and <code>StationNames</code>, there are two storing options. They can be stored as a character matrix shown below, or they can be store as a string vector. In that case, the format would be <code>string StationNames(num_stations)</code>.</li>
</ol>
<hr  />
<h2>Introduction</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#file-types">File Types</a><ul>
<li><a href="#forecasts">Forecasts</a></li>
<li><a href="#observations">Observations</a></li>
<li><a href="#analogs">Analogs</a></li>
<li><a href="#similarity">Similarity</a></li>
<li><a href="#standarddeviation">StandardDeviation</a></li>
<li><a href="#matrix">Matrix</a></li>
</ul>
</li>
<li><a href="#references">References</a></li>
</ul>
<p >Under the <a href="https://github.com/Weiming-Hu/AnalogsEnsemble/tree/master/apps">apps</a> directory, there are several C++ programs that implements different phases of generating analog ensembles, including calculating standard deviations, calculating similarity metrics, and selecting analog forecasts, and some other programs for data pre-processing. Currently, all input and output files are in NetCDF format. This articles documents variables and dimensions expected in each file type based on the file type, for example, <a class="el" href="class_forecasts.html" title="Forecasts is an abstract class that extends BasicData and the abstract class Array4D....">Forecasts</a>, <a class="el" href="class_observations.html" title="Observations is an abstract class that extends BasicData. It defines the interface of how to interact...">Observations</a>, Similarity, and so on.</p>
<h2>File Types</h2>
<p >The defined <a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_an_en_i_o.html#addbfb455f641a394c14907163874d8fe">file types</a> include:</p>
<ul>
<li><a class="el" href="class_forecasts.html" title="Forecasts is an abstract class that extends BasicData and the abstract class Array4D....">Forecasts</a></li>
<li><a class="el" href="class_observations.html" title="Observations is an abstract class that extends BasicData. It defines the interface of how to interact...">Observations</a></li>
<li>Analogs</li>
<li>Similarity</li>
<li>StandardDeviation</li>
<li>Matrix</li>
</ul>
<p >Each file type is associated with a list of expected dimensions and a list of expected variables. Those variables and dimensions are required to ensure the correctness and performance of C++ program. Some variables can also be very helpful during visualization.</p>
<h3><a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_forecasts.html">Forecasts</a></h3>
<p >An example <code><a class="el" href="class_forecasts.html" title="Forecasts is an abstract class that extends BasicData and the abstract class Array4D....">Forecasts</a></code> file includes the following content:</p>
<div class="fragment"><div class="line">9 variables (excluding dimension variables):</div>
<div class="line">   char ParameterNames[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">   double ParameterWeights[num_parameters]   (Contiguous storage)  </div>
<div class="line">   char ParameterCirculars[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">   char StationNames[num_chars,num_stations]   (Contiguous storage)  </div>
<div class="line">   double Xs[num_stations]   (Contiguous storage)  </div>
<div class="line">   double Ys[num_stations]   (Contiguous storage)  </div>
<div class="line">   double Times[num_times]   (Contiguous storage)  </div>
<div class="line">   double FLTs[num_flts]   (Contiguous storage)  </div>
<div class="line">   double Data[num_parameters,num_stations,num_times,num_flts]   (Contiguous storage)  </div>
<div class="line"> </div>
<div class="line">5 dimensions:</div>
<div class="line">   num_parameters  Size:17</div>
<div class="line">   num_chars  Size:50</div>
<div class="line">   num_stations  Size:262792</div>
<div class="line">   num_times  Size:31</div>
<div class="line">   num_flts  Size:53</div>
</div><!-- fragment --><ul>
<li><b>ParameterNames</b> are the names of each parameters in the forecasts.</li>
<li><b>ParameterWeights</b> are the corresponding weight for each parameter in the forecasts to be used when computing forecast similarity.</li>
<li><b>ParameterCirculars</b> are the names of the circular parameters.</li>
<li><b>StationNames</b> are the names of the forecast stations or grid points.</li>
<li><b>Xs</b> are the x coordinates of the forecast stations or grid points.</li>
<li><b>Ys</b> are the y coordinates of the forecast stations or grid points.</li>
<li><b><a class="el" href="class_times.html" title="Times class is used to store Time. It is a bidirectional map implemented from Boost so that it provid...">Times</a></b> are the time representation of forecasts. It is the number of seconds since the origin, <a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/classanen_time_1_1_times.html#a7e08602fb0628df1c5f1cccbb98baeb1">1970-01-01 00:00:00 UTC</a> by default.</li>
<li><b>FLTs</b> are the time representation of forecast lead times. It is the number of seconds since the initialization of the forecast model.</li>
<li><b>Data</b> is a 4-dimensional array that stores the actual forecast values.</li>
</ul>
<h3><a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_observations.html">Observations</a></h3>
<p >An example <code><a class="el" href="class_observations.html" title="Observations is an abstract class that extends BasicData. It defines the interface of how to interact...">Observations</a></code> file looks pretty much similar <code><a class="el" href="class_forecasts.html" title="Forecasts is an abstract class that extends BasicData and the abstract class Array4D....">Forecasts</a></code>, except that the variable <b>Data</b> is a 3-dimensional array without forecast lead times.</p>
<div class="fragment"><div class="line">8 variables (excluding dimension variables):</div>
<div class="line">   char ParameterNames[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">   double ParameterWeights[num_parameters]   (Contiguous storage)  </div>
<div class="line">   char ParameterCirculars[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">   char StationNames[num_chars,num_stations]   (Contiguous storage)  </div>
<div class="line">   double Xs[num_stations]   (Contiguous storage)  </div>
<div class="line">   double Ys[num_stations]   (Contiguous storage)  </div>
<div class="line">   double Times[num_times]   (Contiguous storage)  </div>
<div class="line">   double Data[num_parameters,num_stations,num_times]   (Contiguous storage)  </div>
<div class="line"> </div>
<div class="line">4 dimensions:</div>
<div class="line">   num_parameters  Size:15</div>
<div class="line">   num_chars  Size:50</div>
<div class="line">   num_stations  Size:262792</div>
<div class="line">   num_times  Size:496</div>
</div><!-- fragment --><h3><a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_analogs.html">Analogs</a></h3>
<p >An example <code>Analogs</code> file includes the following content:</p>
<div class="fragment"><div class="line">10 variables (excluding dimension variables):</div>
<div class="line">    double Analogs[num_stations,num_times,num_flts,num_members,num_cols]   (Contiguous storage)  </div>
<div class="line">    char StationNames[num_chars,num_stations]   (Contiguous storage)  </div>
<div class="line">    double Xs[num_stations]   (Contiguous storage)  </div>
<div class="line">    double Ys[num_stations]   (Contiguous storage)  </div>
<div class="line">    double Times[num_times]   (Contiguous storage)  </div>
<div class="line">    double FLTs[num_flts]   (Contiguous storage)  </div>
<div class="line">    char MemberStationNames[num_chars,member_num_stations]   (Contiguous storage)  </div>
<div class="line">    double MemberXs[member_num_stations]   (Contiguous storage)  </div>
<div class="line">    double MemberYs[member_num_stations]   (Contiguous storage)  </div>
<div class="line">    double MemberTimes[member_num_times]   (Contiguous storage)  </div>
<div class="line"> </div>
<div class="line">8 dimensions:</div>
<div class="line">    num_stations  Size:10</div>
<div class="line">    num_times  Size:100</div>
<div class="line">    num_flts  Size:10</div>
<div class="line">    num_members  Size:5</div>
<div class="line">    num_cols  Size:3</div>
<div class="line">    num_chars  Size:50</div>
<div class="line">    member_num_stations  Size:10</div>
<div class="line">    member_num_times  Size:1000</div>
</div><!-- fragment --><ul>
<li><b>Analogs</b> is a 5-dimensional array that stores analog forecasts. More information about analogs can be found at <a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_analogs.html">here</a>.</li>
<li><b>FLTs</b> is the time representation of the analog forecasts. It is the number of seconds since the initialization of the forecast model.</li>
<li><b>StationNames</b> are the names of stations for analog forecasts.</li>
<li><b>Xs</b> are the x coordinates of stations for analog forecasts.</li>
<li><b>Ys</b> are the y coordinates of stations for analog forecasts.</li>
<li><b><a class="el" href="class_times.html" title="Times class is used to store Time. It is a bidirectional map implemented from Boost so that it provid...">Times</a></b> is the time representation of the analog forecasts. It is the number of seconds since the origin, <a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/classanen_time_1_1_times.html#a7e08602fb0628df1c5f1cccbb98baeb1">1970-01-01 00:00:00 UTC</a> by default.</li>
<li><b>MemberStationNames</b> are the names of stations for analog members. This can be used together with the search station index in the fifth dimension to get the exact details of search station used.</li>
<li><b>MemberXs</b> are the x coordinates of stations for analog members. This can be used together with the search station index in the fifth dimension to get the exact details of search station used.</li>
<li><b>MemberYs</b> are the y coordinates of stations for analog members. This can be used together with the search station index in the fifth dimension to get the exact details of search station used.</li>
<li><b>MemberTimes</b> is the time representation of the search times. This can be used together with the search time index in the fifth dimension to know what historical time this member belongs to.</li>
</ul>
<h3><a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_similarity_matrices.html">Similarity</a></h3>
<p >An example <code>Similarity</code> file includes the following content:</p>
<div class="fragment"><div class="line">13 variables (excluding dimension variables):</div>
<div class="line">    double SimilarityMatrices[num_cols,num_entries,num_flts,num_times,num_stations]   (Contiguous storage)  </div>
<div class="line">    char ParameterNames[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">    double ParameterWeights[num_parameters]   (Contiguous storage)  </div>
<div class="line">    char ParameterCirculars[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">    char StationNames[num_chars,num_stations]   (Contiguous storage)  </div>
<div class="line">    double Xs[num_stations]   (Contiguous storage)  </div>
<div class="line">    double Ys[num_stations]   (Contiguous storage)  </div>
<div class="line">    double Times[num_times]   (Contiguous storage)  </div>
<div class="line">    double FLTs[num_flts]   (Contiguous storage)  </div>
<div class="line">    char SearchStationNames[num_chars,search_num_stations]   (Contiguous storage)  </div>
<div class="line">    double SearchXs[search_num_stations]   (Contiguous storage)  </div>
<div class="line">    double SearchYs[search_num_stations]   (Contiguous storage)  </div>
<div class="line">    double SearchTimes[search_num_times]   (Contiguous storage)  </div>
<div class="line"> </div>
<div class="line">9 dimensions:</div>
<div class="line">    num_stations  Size:10</div>
<div class="line">    num_times  Size:100</div>
<div class="line">    num_flts  Size:10</div>
<div class="line">    num_entries  Size:100</div>
<div class="line">    num_cols  Size:3</div>
<div class="line">    num_parameters  Size:10</div>
<div class="line">    num_chars  Size:50</div>
<div class="line">    search_num_stations  Size:10</div>
<div class="line">    search_num_times  Size:100</div>
</div><!-- fragment --><ul>
<li><b>SimilarityMatrices</b> is a 5-dimensional array that stores similarity metric values.</li>
<li><b>ParameterNames</b> are names of parameters used to calculate the similarity.</li>
<li><b>ParameterWeights</b> are weights of parameters used to calculate the similarity.</li>
<li><b>ParameterCirculars</b> are names of circular parameters.</li>
<li><b>StationNames</b> are names of stations or grid points for which similaity is generated.</li>
<li><b>Xs</b> are x coordinates of stations or grid points for which similaity is generated.</li>
<li><b>Ys</b> are y coordinates of stations or grid points for which similaity is generated.</li>
<li><b><a class="el" href="class_times.html" title="Times class is used to store Time. It is a bidirectional map implemented from Boost so that it provid...">Times</a></b> is the time representation of the similarity. It is the number of seconds since the origin, <a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/classanen_time_1_1_times.html#a7e08602fb0628df1c5f1cccbb98baeb1">1970-01-01 00:00:00 UTC</a> by default.</li>
<li><b>FLTs</b> is the time representation of the similarity. It is the number of seconds since the initialization of the forecast model.</li>
<li><b>SearchTimes</b> are times for the complete search period. This can be used together with the search time index in the fifth dimension to know what historical forecast this similarity is generated from.</li>
<li><b>SearchStationNames</b> are stations names for the complete search data. This can be used together with the search station index in the fifth dimension to know what station/grid point is used to generate similarity.</li>
<li><b>SearchXs</b> are x coordinates for the complete search stations. This can be used together with the search station index in the fifth dimension to know what station/grid point is used to generate similarity.</li>
<li><b>SearchYs</b> are y coordinates for the complete search stations. This can be used together with the search station index in the fifth dimension to know what station/grid point is used to generate similarity.</li>
</ul>
<h3><a href="https://weiming-hu.github.io/AnalogsEnsemble/CXX/class_standard_deviation.html">StandardDeviation</a></h3>
<p >An example <code>StandardDeviation</code> file includes the following content:</p>
<div class="fragment"><div class="line">8 variables (excluding dimension variables):</div>
<div class="line">    double StandardDeviation[num_parameters,num_stations,num_flts]   (Contiguous storage)  </div>
<div class="line">    char ParameterNames[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">    double ParameterWeights[num_parameters]   (Contiguous storage)  </div>
<div class="line">    char ParameterCirculars[num_chars,num_parameters]   (Contiguous storage)  </div>
<div class="line">    char StationNames[num_chars,num_stations]   (Contiguous storage)  </div>
<div class="line">    double Xs[num_stations]   (Contiguous storage)  </div>
<div class="line">    double Ys[num_stations]   (Contiguous storage)  </div>
<div class="line">    double FLTs[num_flts]   (Contiguous storage)  </div>
<div class="line"> </div>
<div class="line">4 dimensions:</div>
<div class="line">    num_parameters  Size:10</div>
<div class="line">    num_stations  Size:10</div>
<div class="line">    num_flts  Size:10</div>
<div class="line">    num_chars  Size:50</div>
</div><!-- fragment --><ul>
<li><b>StandardDeviation</b> is a 3-dimensional array that stores standard deviation values.</li>
<li><b>ParameterNames</b> are the names of parameters.</li>
<li><b>ParameterWeights</b> are the weights of parameters.</li>
<li><b>ParameterCirculars</b> are the names of circular parameters.</li>
<li><b>StationNames</b> are the names of stations or grid points.</li>
<li><b>Xs</b> are the x coordinates of stations or grid points.</li>
<li><b>Ys</b> are the y coordinates of stations or grid points.</li>
<li><b>FLTs</b> are the forecast lead times.</li>
</ul>
<h3>Matrix</h3>
<p >File type <code>Matrix</code> is designed for time mapping matrix between forecast times/forecast lead times and observation times. It is usually in text file format.</p>
<h2>References</h2>
<p >All the example output is generated using R package <a href="https://cran.r-project.org/web/packages/ncdf4/index.html">ncdf4</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
