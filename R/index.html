---
sidebar_link: true
title: R Documentation
---


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analog Ensemble Package • RAnEn</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Analog Ensemble Package">
<meta property="og:description" content="The Analog Ensemble Package computes and manages analog ensembles. It is implemented in C++ and exported to R interface.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">RAnEn</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">3.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="parallel-ensemble-forecast-package" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#parallel-ensemble-forecast-package" class="anchor"></a><a href="https://weiming-hu.github.io/AnalogsEnsemble/">Parallel Ensemble Forecast Package</a>
</h1></div>

<p><em>This document is still under development.</em></p>
<!-- vim-markdown-toc GitLab -->
<ul>
<li><a href="#about">About</a></li>
<li>
<a href="#requirement-and-dependencies">Requirement and Dependencies</a>
<ul>
<li><a href="#on-mac">On Mac</a></li>
<li><a href="#on-linux">On Linux</a></li>
</ul>
</li>
<li>
<a href="#installation">Installation</a>
<ul>
<li><a href="#c-programs-and-libraries">C Programs and Libraries</a></li>
<li>
<a href="#r-package">R Package</a> * <a href="#use-released-tarball-file">Use Released Tarball File</a> * <a href="#compile-from-source">Compile from Source</a>
</li>
<li><a href="#cmake-tunable-parameters-look-up">CMake Tunable Parameters Look-up</a></li>
</ul>
</li>
<li><a href="#known-issues">Known Issues</a></li>
<li><a href="#feedbacks">Feedbacks</a></li>
</ul>
<!-- vim-markdown-toc --><div id="about" class="section level2">
<h2 class="hasAnchor">
<a href="#about" class="anchor"></a>About</h2>
<p>Parallel Ensemble Forecast package uses a numerical weather prediction algorithm, called Analog Ensemble (AnEn), to generate ensemble forecasts. Ensemble members, also referred to as analogs, are selected based on the similarity between the current multivariate forecasts and the historical forecasts. It has been successfully applied to forecasts of several weather variables, for example, short-term temperature and wind speed predictions.</p>
<p>This package contains several libraries and applications:</p>
<ul>
<li>
<strong>AnEn</strong>: This is the main library that is implemented in C++. It provides main functionality of the AnEn method;</li>
<li>
<strong>AnEnIO</strong>: This is the library for file I/O. Currently, it supports reading and writing <a href="https://www.unidata.ucar.edu/software/netcdf/">standard NetCDF</a>.</li>
<li>
<strong>RAnEn</strong>: This is an R package which provides C++ library <em>AnEn</em> functionality to facilitate researchers who prefer R. <em>RAnEn</em> stands for <em>R Analogs Ensemble</em>.</li>
<li>
<strong>Apps</strong>: You can find multiple applications included in <code>apps/</code> folder designed for <em>AnEn</em> computation and data management.</li>
</ul>
<p><strong>These packages are developed and tested on Linux and MacOS and not guaranteed on Windows.</strong></p>
</div>
<div id="requirement-and-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#requirement-and-dependencies" class="anchor"></a>Requirement and Dependencies</h2>
<p>A list of requirement and dependency is provided below. Note that you don’t necessarily have to install them all before installing the CAnEn library because some of them can be automatically installed during the make process, or because you may not want to install only parts of the modules.</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="88%">
</colgroup>
<thead><tr class="header">
<th align="center">Dependency</th>
<th align="center">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CMake</td>
<td align="center">Required for the C++ program.</td>
</tr>
<tr class="even">
<td align="center">GCC/Clang</td>
<td align="center">Required for the C++ program.</td>
</tr>
<tr class="odd">
<td align="center">NetCDF-C</td>
<td align="center">Optional for the C++ program. If it is not found, the project will try to build it.</td>
</tr>
<tr class="even">
<td align="center">Boost C++</td>
<td align="center">Optional for the C++ program. It is recommended to let the project build it for the C++ program.</td>
</tr>
<tr class="odd">
<td align="center">CppUnit</td>
<td align="center">Required for the C++ program when building tests.</td>
</tr>
<tr class="even">
<td align="center">R</td>
<td align="center">Required for the R library.</td>
</tr>
<tr class="odd">
<td align="center">OpenMP</td>
<td align="center">Optional for both R and C++.</td>
</tr>
</tbody>
</table>
<div id="on-mac" class="section level3">
<h3 class="hasAnchor">
<a href="#on-mac" class="anchor"></a>On Mac</h3>
<p>It is fairly straightforward to use <a href="https://brew.sh/">HomeBrew</a> to manage packages. However, note that <code>HomeBrew</code> might not be working well with <code>Port</code>. If you already have one of the two, go with the desired one.</p>
<pre><code># Install GNU compilers to support OpenMP
#
# brew search gcc
# 
# Select version from the output of the above command, I choose gcc-7 below.
#
brwe install gcc@7

# Install CMake
# brew search cmake
brew install cmake

# Install NetCDF
brew install netcdf</code></pre>
</div>
<div id="on-linux" class="section level3">
<h3 class="hasAnchor">
<a href="#on-linux" class="anchor"></a>On Linux</h3>
<p>If <code>apt-get</code> is available, please see the following commands.</p>
<pre><code># Install NetCDF
sudo apt-get install libnetcdf-dev netcdf-bin
</code></pre>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="c-programs-and-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#c-programs-and-libraries" class="anchor"></a>C Programs and Libraries</h3>
<p>The installation process can be divided into two steps:</p>
<ul>
<li>generate make files</li>
<li>build programs and libraries</li>
</ul>
<p>First, let’s create a <code>build/</code> folder where it stores our automatically generated files. This is also called an out-of-source build.</p>
<pre><code>cd AnalogsEnsemble
mkdir build
cd build</code></pre>
<p>Then, generate the make files.</p>
<pre><code>cmake ..

# If you would like to change the default compiler, specify the compilers like this
#
# CC=[full path to CC] CXX=[full path to CXX] cmake ..</code></pre>
<p>Read the output messages. If you would like to make any changes and generate new make files, please delete all the files in <code>build/</code> folder first. Otherwise, you will not change anything.</p>
<p>Some of the components are by default turned off. Please refer to <a href="#cmake-tunable-parameters-look-up">CMake Tunable Parameters Look-up</a> for instructions for how to turn them on.</p>
<p>After having the make files generated, please go ahead and compile the programs and the libraries.</p>
<pre><code>make

# Or if you are using UNIX system, use the flag -j[number of cores] to parallelize the make process
make -j4

# Build document if desired. The /html and the /man folders will be in your build directory
make document</code></pre>
<p>After the compilation, the programs and libraries should be in the folder <code>AnalogsEnsemble/output</code>. For example, to print out the help messages for the program <code>analogCalculator</code>, open up a terminal and <code>cd</code> into the binary folder <code>[Where you download the repository]/AnalogsEnsemble/output/bin/</code> and run the following command.</p>
<pre><code>./analogGenerator 
# Analog Ensemble program --- Analog Generator
# Available options:
#  -h [ --help ]             Print help information for options.
#  -c [ --config ] arg       Set the configuration file path. Command line 
#                            options overwrite options in configuration file. 
# ...</code></pre>
<p>If you want to clean up the folder, please do the following.</p>
<pre><code>make clean</code></pre>
</div>
<div id="r-package" class="section level3">
<h3 class="hasAnchor">
<a href="#r-package" class="anchor"></a>R Package</h3>
<p><em>Please use the installation guide for updating the package as well. The process is the same.</em></p>
<div id="use-released-tarball-file" class="section level5">
<h5 class="hasAnchor">
<a href="#use-released-tarball-file" class="anchor"></a>Use Released Tarball File</h5>
<p>Generally, the following R packages are needed:</p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/BH/index.html">BH</a></li>
<li><a href="https://cran.r-project.org/web/packages/Rcpp/index.html">Rcpp</a></li>
</ul>
<p>Please run the following commands in R and make sure they succeed.</p>
<pre><code>install.packages('Rcpp')
install.packages('BH')</code></pre>
<p>If you are using <code>Windows</code>, please install the following programs:</p>
<ul>
<li><a href="https://cran.r-project.org/bin/windows/base/">R for Windows</a></li>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/">Latest Rtools</a></li>
</ul>
<p>The following command installs the latest version of <code>RAnEn</code>. Please run the following command in R.</p>
<pre><code>install.packages("https://github.com/Weiming-Hu/AnalogsEnsemble/raw/master/RAnalogs/releases/RAnEn_latest.tar.gz", repos = NULL)</code></pre>
<p>If you want to install a specific version of <code>RAnEn</code>, you can go to the <a href="https://github.com/Weiming-Hu/AnalogsEnsemble/tree/master/RAnalogs/releases">release folder</a>, copy the full name of the tarball file, replace the following part <code>[tarball name]</code> (including the square bracket) with it, and run the following command in R.</p>
<pre><code>install.packages("https://github.com/Weiming-Hu/AnalogsEnsemble/raw/master/RAnalogs/releases/[tarball name]", repos = NULL)</code></pre>
<p>Or, you can download the latest tarball file from the <a href="https://github.com/Weiming-Hu/AnalogsEnsemble/tree/master/RAnalogs/releases">release folder</a>. That is the package file you need to install inside R later. If you have already downloaded this repository, you can also find the release package tarball file under the folder <code>[Where you downloaded this repository]/AnalogsEnsemble/RAnalogs/releases</code>. Then, open an R session, and run the following command.</p>
<pre><code># The quiet option is to reduce the amount of standard output. Switch the parameter
# if you prefer to see the full list of warnings
#
install.packages("[full path to the tarball file]", type = "source", repos = NULL, quiet = T)

# On Windows, please separate folder names with `//`.
# For example, the full path to the tarball file on a Windows should look similar to this
# C://Users//yourName//Downloads//RAnEn_3.0.6.tar.gz</code></pre>
<p>If you want to use a different compiler, an easy workaround is to create a <code>Makevars</code> file under <code>~/.R</code>, with the following content.</p>
<pre><code>CXX1X=[C++11 compiler]

# required on Mac OS
CXX11=[C++11 compiler]</code></pre>
<p>After this, you should see the same compiler in the standard output.</p>
</div>
<div id="compile-from-source" class="section level5">
<h5 class="hasAnchor">
<a href="#compile-from-source" class="anchor"></a>Compile from Source</h5>
<p>First, let’s create a <code>build/</code> folder where it stores our automatically generated files.</p>
<pre><code>cd AnalogsEnsemble
mkdir build
cd build</code></pre>
<p>Then, let’s generate the make files.</p>
<pre><code>cmake -DINSTALL_RAnEn=ON -G "Unix Makefiles" ..</code></pre>
<p>Read the output messages. If you would like to make any changes and generate new make files, please delete all the files in <code>build/</code> folder first. Otherwise, you will not change anything because of the existed files.</p>
<p>After the make files have been generated, go ahead and install the R package.</p>
<pre><code>make</code></pre>
<p>The following command installs the R package.</p>
<pre><code>make install</code></pre>
<p>Clean up the files after the make process.</p>
<pre><code>make clean-rsrc
make clean-roxygen
make clean</code></pre>
</div>
</div>
<div id="cmake-tunable-parameters-look-up" class="section level3">
<h3 class="hasAnchor">
<a href="#cmake-tunable-parameters-look-up" class="anchor"></a>CMake Tunable Parameters Look-up</h3>
<table class="table">
<colgroup>
<col width="15%">
<col width="70%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="center">Parameter</th>
<th align="center">Explanation</th>
<th align="center">Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">CC</td>
<td align="center">The C compiler to use.</td>
<td align="center">[System dependent]</td>
</tr>
<tr class="even">
<td align="center">CXX</td>
<td align="center">The C++ compiler to use.</td>
<td align="center">[System dependent]</td>
</tr>
<tr class="odd">
<td align="center">INSTALL_RAnEn</td>
<td align="center">Build and install the <code>RAnEn</code> library.</td>
<td align="center">OFF</td>
</tr>
<tr class="even">
<td align="center">BOOST_TYPE</td>
<td align="center">
<code>BUILD</code> for building <code>Boost</code> library; <code>SYSTEM</code> for using the <code>Boost</code> library installed on the system.</td>
<td align="center">BUILD</td>
</tr>
<tr class="odd">
<td align="center">CPPUNIT_TYPE</td>
<td align="center">
<code>BUILD</code> for building <code>CppUnit</code> library; <code>SYSTEM</code> for using the <code>CppUnit</code> library from the system.</td>
<td align="center">BUILD</td>
</tr>
<tr class="even">
<td align="center">CMAKE_BUILD_TYPE</td>
<td align="center">
<code>Release</code> for release mode; <code>Debug</code> for debug mode.</td>
<td align="center">Release</td>
</tr>
<tr class="odd">
<td align="center">CMAKE_BUILD_TESTS</td>
<td align="center">Build tests.</td>
<td align="center">OFF</td>
</tr>
<tr class="even">
<td align="center">BUILD_NETCDF</td>
<td align="center">Build <code>NetCDF</code> library regardless of its existence.</td>
<td align="center">OFF</td>
</tr>
<tr class="odd">
<td align="center">BUILD_HDF5</td>
<td align="center">Build <code>HDF5</code> library regardless of its existence.</td>
<td align="center">OFF</td>
</tr>
<tr class="even">
<td align="center">VERBOSE</td>
<td align="center">Print detailed messages during the compiling process.</td>
<td align="center">OFF</td>
</tr>
<tr class="odd">
<td align="center">CODE_PROFILING</td>
<td align="center">Print time profiling information.</td>
<td align="center">OFF</td>
</tr>
<tr class="even">
<td align="center">BUILD_GRIBCONVERTER</td>
<td align="center">Build the GRIB Converter utility. <a href="https://confluence.ecmwf.int/display/ECC">Eccodes</a> library required.</td>
<td align="center">ON</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="known-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#known-issues" class="anchor"></a>Known Issues</h2>
<p>Please see known issues in <a href="https://weiming-hu.github.io/AnalogsEnsemble/2018/10/17/known-issues.html">this post</a>. If you could not find solutions to your issue, you can consider open a ticket or comment below the post. Thank you.</p>
</div>
<div id="feedbacks" class="section level2">
<h2 class="hasAnchor">
<a href="#feedbacks" class="anchor"></a>Feedbacks</h2>
<p>We appreciate collaborations and feedbacks from users. Please contact maintainer <a href="http://weiming.ddns.net">Weiming Hu</a> through <a href="weiming@psu.edu" class="uri">weiming@psu.edu</a>, or create tickets if you have any problems.</p>
<p>Thank you!</p>
<pre><code># "`-''-/").___..--''"`-._
#  (`6_ 6  )   `-.  (     ).`-.__.`)   WE ARE ...
#  (_Y_.)'  ._   )  `._ `. ``-..-'    PENN STATE!
#    _ ..`--'_..-_/  /--'_.' ,'
#  (il),-''  (li),'  ((!.-'
# 
# Authors: 
#     Weiming Hu &lt;weiming@psu.edu&gt;
#     Guido Cervone
#
# Contributors: 
#     Laura Clemente-Harding
#     Martina Calovi
#         
# Geoinformatics and Earth Observation Laboratory (http://geolab.psu.edu)
# Department of Geography and Institute for CyberScience
# The Pennsylvania State University</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/Weiming-Hu/AnalogsEnsemble/issues">https://​github.com/​Weiming-Hu/​AnalogsEnsemble/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://www.codacy.com?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=Weiming-Hu/AnalogsEnsemble&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/f4cf23c626034d92a3bef0ba169a218a" alt="Codacy Badge"></a></li>
<li><a href="https://travis-ci.com/Weiming-Hu/AnalogsEnsemble"><img src="https://travis-ci.com/Weiming-Hu/AnalogsEnsemble.svg?token=yTGL4zEDtXKy9xWq1dsP&amp;branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/Weiming-Hu/AnalogsEnsemble"><img src="https://codecov.io/gh/Weiming-Hu/AnalogsEnsemble/branch/master/graph/badge.svg?token=tcGGOTyHHk" alt="codecov"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://mybinder.org/v2/gh/Weiming-Hu/AnalogsEnsemble/master"><img src="https://mybinder.org/badge.svg" alt="Binder"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
